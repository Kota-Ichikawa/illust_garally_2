<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>ネタ系イラスト — 狼狐のらくがき集</title>
    <style>
      :root {
        --bg: #f6fff9;
        --card: #fff;
        --accent: #4caf50; /* green accent */
        --text: #222;
        --muted: #666;
        font-family: "Noto Sans JP", "Hiragino Kaku Gothic ProN", Meiryo,
          sans-serif;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        background: var(--bg);
        color: var(--text);
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      header {
        width: 100%;
        padding: 20px 16px;
        text-align: center;
        background: linear-gradient(90deg, #fff, #f4fff6);
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.03);
      }
      header h1 {
        margin: 0;
        font-size: clamp(18px, 3.6vw, 30px);
      }
      main {
        width: 100%;
        max-width: 1100px;
        padding: 24px;
        padding-bottom: 56px;
      }
      .back {
        display: inline-block;
        margin-bottom: 12px;
        color: var(--accent);
        text-decoration: none;
      }

      /* Entries grid */
      .entries {
        display: grid;
        gap: 24px;
        grid-template-columns: 1fr;
      }
      @media (min-width: 900px) {
        .entries {
          grid-template-columns: repeat(3, 1fr);
        }
      }

      .entry {
        background: var(--card);
        border-radius: 12px;
        padding: 16px;
        box-shadow: 0 8px 24px rgba(15, 20, 40, 0.04);
        display: flex;
        flex-direction: column;
        gap: 12px;
        position: relative;
      }
      .date {
        font-size: 13px;
        color: var(--muted);
        margin-bottom: 6px;
      }
      .thumb {
        width: 100%;
        aspect-ratio: 4/3;
        border-radius: 8px;
        overflow: hidden;
        background: #eee;
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 160px;
      }
      .thumb img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }
      .comment {
        font-size: 14px;
        color: var(--text);
        margin: 0;
        margin-top: 6px;
      }
      .empty {
        color: var(--muted);
        text-align: center;
        padding: 28px 12px;
        background: linear-gradient(180deg, #fff, #f7fff9);
        border-radius: 8px;
      }
      footer {
        margin: 36px 0;
        color: var(--muted);
        font-size: 13px;
        padding-bottom: 24px;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>狼狐のらくがき集 — ネタ系イラスト</h1>
    </header>

    <main>
      <a class="back" href="index.html">← トップに戻る</a>

      <section id="entries" class="entries" aria-label="ネタイラスト一覧">
        <div id="loading" class="empty">読み込み中…</div>
      </section>
    </main>

    <footer>© 狼狐 — ネタ系イラスト</footer>

    <script>
      (function () {
        const container = document.getElementById("entries");
        const loading = document.getElementById("loading");
        const jsonPath = "src/neta/images.json";

        function mkArticle(item) {
          const article = document.createElement("article");
          article.className = "entry";

          const date = document.createElement("div");
          date.className = "date";
          date.textContent = item.date || "";

          const figure = document.createElement("figure");
          figure.className = "thumb";
          const img = document.createElement("img");
          img.loading = "lazy";
          img.alt = item.alt || item.file || "";
          img.src = "src/neta/" + (item.file || "");
          figure.appendChild(img);

          const p = document.createElement("p");
          p.className = "comment";
          p.textContent = item.comment || "";

          article.appendChild(date);
          article.appendChild(figure);
          article.appendChild(p);
          return article;
        }

        fetch(jsonPath)
          .then((res) => {
            if (!res.ok) throw new Error("Failed to fetch");
            return res.json();
          })
          .then((list) => {
            loading.remove();
            if (!Array.isArray(list) || list.length === 0) {
              const empty = document.createElement("div");
              empty.className = "empty";
              empty.textContent =
                "画像が見つかりません。src/neta/images.json を確認してください。";
              container.appendChild(empty);
              return;
            }
            list.forEach((item) => {
              container.appendChild(mkArticle(item));
            });
          })
          .catch((err) => {
            loading.textContent =
              "読み込みに失敗しました（" + err.message + "）";
          });
      })();
    </script>
  </body>
</html>
